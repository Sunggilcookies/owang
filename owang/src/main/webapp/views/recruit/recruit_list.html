<!DOCTYPE html>
<html xmlns="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>board/list</title>
	<script src="https://code.jquery.com/jquery-3.7.1.js"
		integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap"
		rel="stylesheet">
	<link rel="stylesheet" th:href="@{/css/recruit/recruit.css}">
	<style>
		/* ë‚´ë¦¼ì°¨ìˆœ/ì˜¤ë¦„ì°¨ìˆœ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
		.sortable-header {
			position: relative;
			cursor: pointer;
		}

		/* ë‚´ë¦¼ì°¨ìˆœ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
		.descending .sortable-header::after {
			transform: rotate(180deg);
			/* ë‚´ë¦¼ì°¨ìˆœ ì•„ì´ì½˜(â–¼)ìœ¼ë¡œ íšŒì „ */
		}
	</style>
</head>

<body>
	<div id="home">
		<header>
			<div th:insert="~{header :: header}"></div>
		</header>
		
		<remocon>
	       <div th:insert="~{remocon :: remocon}"></div>
    
    	</remocon>

		<div class="title_box">
			<h1>ì±„ìš©ê³µê³  </h1>
			<br>
			<h3 id="p">ë‹¤ì–‘í•œ ì±„ìš©ì •ë³´ì™€ ìƒˆë¡œìš´ ì±„ìš©ì†Œì‹ì„ ì˜¤ì™•ì—ì„œ ë§Œë‚˜ë³´ì„¸ìš”</h3>
		</div>

		<div class="wrap">
			<!--ê²€ìƒ‰ div-->
			<div class="search">
				<form action="/recruit/search" method="get">
					<select name="searchOption" id="select">
						<option value="all">ì „ì²´</option>
						<option value="title">ì œëª©</option>
						<option value="content">ë‚´ìš©</option>
						<option value="name">íšŒì‚¬ ì´ë¦„</option>
					</select>
					<input type="text" name="keyword" placeholder="ğŸ” ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" id="search_input">
					<button type="submit" class="dod">
						<i class="fa-solid fa-magnifying-glass fa-beat-fade"
							style="color:  rgb(45, 101, 242);">&nbspê²€ìƒ‰</i>
					</button>
				</form>
			</div>

			<!-- íƒ­ -->
			<ul class="tabs">
				<li><a href="/recruit/list/all/1">ì „ì²´ ê³µê³ </a></li>
				<li><a href="/recruit/list/1">ì±„ìš© ì¤‘</a></li>
				<li><a href="/recruit/list/close/1">ì±„ìš© ë§ˆê°</a></li>
			</ul>

			<!-- ì±„ìš© ê°€ëŠ¥ ë°ì´í„° -->
			<table border="0" class="list_table" id="data-table">
				<tr>
					<th>ë²ˆí˜¸</th>
					<th>ì œëª©</th>
					<th>ì±„ìš©ì‹œì‘ì¼</th>
					<th>~</th>
					<th class="sortable-header" onclick="toggleSortOrder()">
						ì±„ìš©ë§ˆê°ì¼
						<span class="dropdown-icon"></span>
					</th>
					<th>íšŒì‚¬ì´ë¦„</th>
					<!--<td>ê¸°ì—…ì•„ì´ë””(ë³¸í¸ì—ì„ ì œê±°)</td>-->
				</tr>
				<tr th:each="dto, dtoStat : ${openData}">
					<td th:text="${dtoStat.count + recruitDTO.start}" />
					<td id="list_title_left">
						<a th:href="|/recruit/detail/${dto.cid}/${recruitDTO.page}/${dto.recruitId}|"
							th:text="|${dto.recruitTitle}  D ${dto.recruitMagam}|" class="hoverTitle"></a> <br>
							
							ì¡°íšŒìˆ˜ : [[${dto.cnt}]]	&nbsp &nbsp ì§€ì›ììˆ˜ : [[${dto.appnum}]]
					</td>
					
					<td th:text="${dto.regDate}" id="chae_start"/>
					<td th:text="'&tilde;'"></td>
					<td th:text="${dto.realMagam}" id="chae_end"/>
					<!--            <td th:text="${dto.cid}" />-->
					<td >
						<a th:href="'/company/detail/' + ${dto.cid}" th:text="${dto.cname}" class="hoverCompany"></a>
					</td>
				</tr>
			</table>
		</div>

		<!-- í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ - "ì±„ìš© ì¤‘" íƒ­ -->
		<div id="openPageNav" class="pagination-container">
			<a th:if="${openDto.pageStart > 1}" th:href="${openDto.page - openDto.page} + 1" 
				class="pagination-link"	th:text="'<<'" />
			<a th:if="${openDto.pageStart > 1}" th:href="${openDto.pageStart - 1}" 
					class="pagination-link"	th:text="'<'" />
			<th:block th:each="no: ${#numbers.sequence(openDto.pageStart, openDto.pageEnd)}">
				<span th:if="${no==openDto.page}" 
					class="pagination-current"	th:text="${no}" />
				<a th:unless="${no==openDto.page}" 
				class="pagination-link"	th:href="${no}" th:text="${no}" />
			</th:block>
			<a th:if="${openDto.pageEnd < openDto.pageTotal}" th:href="${openDto.pageEnd + 1}" th:text="'[ë‹¤ìŒ]'" 
				class="pagination-link"/>
			<a th:if="${openDto.pageEnd < openDto.pageTotal}" th:href="${openDto.pageTotal}" th:text="'[ë§¨ë]'" 
			class="pagination-link"/>
		</div>

		<!-- ê¸€ì“°ê¸° ë²„íŠ¼ -->
		<div align="right" th:if="${session['cid']}">
			<a th:href="|/recruit/insert/${recruitDTO.page}|">ê¸€ì“°ê¸°</a>
		</div>
	</div>

	</div>
<script>
    // ì´ˆê¸° ì •ë ¬ ë°©í–¥ ì„¤ì •
    var sortOrder = 'asc';
    var primarySortColumn = 4; // ê¸°ë³¸ ì •ë ¬ ê¸°ì¤€: ì±„ìš©ë§ˆê°ì¼
    var secondarySortColumn = 5; // ë³´ì¡° ì •ë ¬ ê¸°ì¤€: ì§€ì›ììˆ˜

    function toggleSortOrder() {
        // í…Œì´ë¸” í—¤ë” ì—´(ì±„ìš©ë§ˆê°ì¼)ì„ í´ë¦­í•  ë•Œë§ˆë‹¤ ì •ë ¬ ë°©í–¥ ë³€ê²½
        if (sortOrder === 'asc') {
            sortOrder = 'desc'; // ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
        } else {
            sortOrder = 'asc'; // ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
        }

        // ì •ë ¬ ë°©í–¥ì— ë”°ë¼ í…Œì´ë¸”ì„ ì •ë ¬
        sortTable(primarySortColumn, secondarySortColumn);

        // ìŠ¤íƒ€ì¼ ë³€ê²½
        updateStyle();
    }

    function toggleSecondarySort() {
        // ë³´ì¡° ì •ë ¬ ê¸°ì¤€ì„ ë³€ê²½
        if (secondarySortColumn === primarySortColumn) {
            secondarySortColumn = 5; // ë³´ì¡° ì •ë ¬ ê¸°ì¤€: ì§€ì›ììˆ˜
        } else {
            secondarySortColumn = primarySortColumn;
        }

        // ì •ë ¬ ë°©í–¥ì— ë”°ë¼ í…Œì´ë¸”ì„ ì •ë ¬
        sortTable(primarySortColumn, secondarySortColumn);

        // ìŠ¤íƒ€ì¼ ë³€ê²½
        updateStyle();
    }

    function sortTable(primaryColumnIndex, secondaryColumnIndex) {
        var table = document.getElementById('data-table');
        var rows = Array.from(table.getElementsByTagName('tr'));
        var header = rows[0];
        var isDescending = sortOrder === 'desc';

        var sortedRows = rows.slice(1).sort(function (a, b) {
            var primaryAValue = a.getElementsByTagName('td')[primaryColumnIndex].textContent;
            var primaryBValue = b.getElementsByTagName('td')[primaryColumnIndex].textContent;

            var secondaryAValue = a.getElementsByTagName('td')[secondaryColumnIndex].textContent;
            var secondaryBValue = b.getElementsByTagName('td')[secondaryColumnIndex].textContent;

            // ê¸°ë³¸ ì •ë ¬ ê¸°ì¤€ìœ¼ë¡œ ë¹„êµ
            var primaryComparison = new Date(primaryAValue) - new Date(primaryBValue);

            // ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ì´ë©´ ë¶€í˜¸ë¥¼ ë°˜ëŒ€ë¡œ í•©ë‹ˆë‹¤.
            if (isDescending) {
                primaryComparison = -primaryComparison;
            }

            // ê¸°ë³¸ ì •ë ¬ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
            if (primaryComparison !== 0) {
                return primaryComparison;
            }

            // ê¸°ë³¸ ì •ë ¬ ê¸°ì¤€ì´ ë™ì¼í•œ ê²½ìš° ë³´ì¡° ì •ë ¬ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
            var secondaryComparison = new Date(secondaryAValue) - new Date(secondaryBValue);

            // ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ì´ë©´ ë¶€í˜¸ë¥¼ ë°˜ëŒ€ë¡œ í•©ë‹ˆë‹¤.
            if (isDescending) {
                secondaryComparison = -secondaryComparison;
            }

            return secondaryComparison;
        });

        sortedRows.forEach(function (sortedRow) {
            if (sortedRow.parentNode === table) {
                table.removeChild(sortedRow);
            }
        });

        table.appendChild(header);
        sortedRows.forEach(function (sortedRow) {
            table.appendChild(sortedRow);
        });
    }

    function updateStyle() {
        var headerCell = document.querySelector('.sortable-header');
        headerCell.classList.toggle('descending', sortOrder === 'desc');

        // ë“œë¡­ë‹¤ìš´ ì•„ì´ì½˜ ë³€ê²½
        var dropdownIcon = document.querySelector('.dropdown-icon');
        if (sortOrder === 'desc') {
            dropdownIcon.innerHTML = 'â–¼'; // ë‚´ë¦¼ì°¨ìˆœ ì•„ì´ì½˜(â–¼)
        } else {
            dropdownIcon.innerHTML = 'â–²'; // ì˜¤ë¦„ì°¨ìˆœ ì•„ì´ì½˜(â–²)
        }
    }
</script>
	<footer>
		<div th:insert="~{footer :: footer}"></div>
	</footer>


</body>

</html>